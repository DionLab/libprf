SET(SOURCES
    version.c
    heuristicInline.c
    profileInline.c
)

IF(PRF_CORE_MAP)
	LIST(APPEND SOURCES mapInline.c) 
ENDIF(PRF_CORE_MAP)

ADD_LIBRARY(LIB_STATIC OBJECT ${SOURCES})
SET_PROPERTY(TARGET LIB_STATIC APPEND PROPERTY COMPILE_FLAGS "-DBUILD_LIBRARY")
ADD_DEPENDENCIES(LIB_STATIC prf_git_version)
IF(BUILD_SHARED_LIBS)
	ADD_LIBRARY(LIB_SHARED OBJECT ${SOURCES} verbose.c)
	SET_PROPERTY(TARGET LIB_SHARED PROPERTY POSITION_INDEPENDENT_CODE ON)
	SET_PROPERTY(TARGET LIB_SHARED APPEND PROPERTY COMPILE_FLAGS "-DBUILD_LIBRARY -DUSINGDLL")
	ADD_DEPENDENCIES(LIB_SHARED prf_git_version)
ENDIF(BUILD_SHARED_LIBS)
